/*
 * SPDX-License-Identifier: Apache-2.0
 *
 * Copyright 2019 the original author or authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

plugins {
    id 'com.github.johnrengelman.shadow' version '5.0.0'
}

repositories {
    flatDir { dir project.file('lib') }
}

configurations {
    uberjar
}

dependencies {
    compile 'org.kordamp.gradle:base-gradle-plugin:0.18.0'

    uberjar 'com.oracle:oci-java-sdk-full:1.5.2'

    compile 'org.codehaus.mojo:animal-sniffer-annotations:1.14'
    compile 'org.glassfish.hk2.external:aopalliance-repackaged:2.5.0-b42'
    compile 'org.bouncycastle:bcpkix-jdk15on:1.60'
    compile 'org.bouncycastle:bcprov-jdk15on:1.60'
    compile 'org.checkerframework:checker-compat-qual:2.0.0'
    compile 'commons-codec:commons-codec:1.10'
    compile 'commons-io:commons-io:2.5'
    compile 'org.apache.commons:commons-lang3:3.4'
    compile 'com.google.errorprone:error_prone_annotations:2.1.3'
    compile 'com.google.guava:guava:25.0-android'
    compile 'org.glassfish.hk2:hk2-api:2.5.0-b42'
    compile 'org.glassfish.hk2:hk2-locator:2.5.0-b42'
    compile 'org.glassfish.hk2:hk2-utils:2.5.0-b42'
    compile 'com.google.j2objc:j2objc-annotations:1.1'
    compile 'com.fasterxml.jackson.core:jackson-annotations:2.9.8'
    compile 'com.fasterxml.jackson.core:jackson-core:2.9.8'
    compile 'com.fasterxml.jackson.core:jackson-databind:2.9.8'
    compile 'com.fasterxml.jackson.datatype:jackson-datatype-jdk8:2.9.8'
    compile 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.9.8'
    compile 'com.fasterxml.jackson.module:jackson-module-jaxb-annotations:2.8.10'
    compile 'org.javassist:javassist:3.22.0-CR2'
    compile 'javax.annotation:javax.annotation-api:1.2'
    compile 'javax.inject:javax.inject:1'
    compile 'org.glassfish.hk2.external:javax.inject:2.5.0-b42'
    compile 'javax.ws.rs:javax.ws.rs-api:2.1'
    compile 'net.jcip:jcip-annotations:1.0'
    compile 'org.glassfish.jersey.core:jersey-client:2.27'
    compile 'org.glassfish.jersey.core:jersey-common:2.27'
    compile 'org.glassfish.jersey.ext:jersey-entity-filtering:2.27'
    compile 'org.glassfish.jersey.inject:jersey-hk2:2.27'
    compile 'org.glassfish.jersey.media:jersey-media-json-jackson:2.27'
    compile 'net.minidev:json-smart:1.3.1'
    compile 'com.google.code.findbugs:jsr305:3.0.2'
    compile 'com.nimbusds:nimbus-jose-jwt:4.9'
    compile 'org.glassfish.hk2:osgi-resource-locator:1.0.1'
    compile 'org.slf4j:slf4j-api:1.7.25'
    compile 'javax.validation:validation-api:1.1.0.Final'
    compile 'javax.activation:activation:1.1.1'

}

sourceSets {
    main {
        compileClasspath += configurations.uberjar
        runtimeClasspath += compileClasspath
    }
}

idea {
    module {
        scopes.PROVIDED.plus += [configurations.uberjar]
    }
}

shadowJar {
    configurations = [project.configurations.uberjar]
    baseName = project.name
    classifier = ''
}

jar.finalizedBy shadowJar
